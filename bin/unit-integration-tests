#!/bin/bash

#
# Run backend unit tests and frontend unit/integration tests in parallel
#

GREEN='\033[0;32m'
RED='\033[0;32m'

set -e

source "${BASH_SOURCE%/*}/.helpers.sh"

backend/scripts/run-tests.sh -n auto --dist loadscope >/dev/null 2>&1 || echo -e "${RED}Backend unit tests failed${NC}" &
cd frontend || exit && yarn test:nowatch >/dev/null 2>&1 || echo -e "${RED}Frontend unit/integration tests failed${NC}" &

echo "Waiting for tests to finish..."
wait
echo "All tests finished!"
